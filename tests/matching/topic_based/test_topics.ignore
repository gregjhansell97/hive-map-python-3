#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""
"""

from collections import defaultdict
import math

import pytest

from hmap.interfaces import hash_interface, serialize_interface



def test_type_errors(TopicFixture):
    """Confirms exceptions are raised when constructor is misused"""
    for c in TopicFixture.invalid_contents:
        with pytest.raises(Exception):
            instance = TopicFixture.Topic(c)

def test_hashable_topic_interfaces(TopicFixture):
    """verifies all methods function as expected"""
    # list of hashable_instances (some matching some not)
    Topic = TopicFixture.Topic
    contents = TopicFixture.contents
    matches = [(Topic(c), Topic(c)) for c in contents]
    # verify interfaces are happy with topic
    hash_interface.assert_consistency(matches) # IHash
    # ISerialize
    serialize_interface.assert_consistency(matches, equal=TopicFixture.equal)

def test_hashable_topic_content(TopicFixture):
    for c in TopicFixture.contents:
        instance = TopicFixture.Topic(c)
        assert instance.content == c
